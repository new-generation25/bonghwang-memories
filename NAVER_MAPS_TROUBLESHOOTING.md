# 네이버 지도 API 인증 문제 해결 가이드

## 현재 상황
- 네이버 지도 API 인증 실패 오류 발생
- API 키: `o8bhr6higo`
- 폴백 Mock 지도 시스템 구현 완료

## 주요 원인 분석

### 1. 도메인 등록 문제 (가장 가능성 높음)
네이버 클라우드 플랫폼에서 현재 도메인이 등록되지 않았을 가능성:
- **개발환경**: `localhost:3000` 
- **배포환경**: Vercel/Netlify 도메인
- **해결책**: 네이버 클라우드 플랫폼 → Maps → 나의 애플리케이션에서 도메인 추가

### 2. API 키 설정 문제
```bash
# 현재 설정된 API 키 확인
NEXT_PUBLIC_NAVER_MAP_CLIENT_ID=o8bhr6higo
```

### 3. 서비스 URL 설정
네이버 Maps API에서 요구하는 서비스 URL 등록 필요

## 구현된 해결책

### 1. 향상된 오류 처리
- 상세한 오류 유형 분석 (인증 실패, 도메인 오류, 할당량 초과 등)
- 사용자 친화적인 오류 메시지
- 개발자를 위한 디버깅 정보

### 2. 폴백 Mock 지도 시스템
- API 실패 시 자동으로 Mock 지도 표시
- 모든 미션 마커 기능 정상 동작
- 사용자 경험 저하 최소화

### 3. 전역 오류 상태 관리
- 스크립트 로딩 실패 감지
- API 키 유효성 검증
- 실시간 도메인 정보 로깅

## 네이버 클라우드 플랫폼 설정 방법

### 1. 콘솔 접속
1. https://console.ncloud.com 접속
2. Maps → 나의 애플리케이션 선택

### 2. 도메인 등록
**개발환경**:
```
http://localhost:3000
https://localhost:3000
```

**배포환경** (예시):
```
https://your-app.vercel.app
https://your-domain.com
```

### 3. 서비스 설정
- **서비스**: Maps
- **플랫폼**: Web
- **Bundle ID**: 해당없음 (웹용)

## 테스트 방법

### 1. 브라우저 콘솔 확인
개발자 도구(F12) → Console에서 확인:
```javascript
// 성공 시
"네이버 지도 API 로딩 성공"
"네이버 지도 초기화 완료"

// 실패 시  
"네이버 지도 API 로딩 실패"
"네이버 지도 API 인증 실패"
```

### 2. 네트워크 탭 확인
- Maps API 스크립트 로딩 상태
- HTTP 상태 코드 (200: 성공, 403: 인증 실패)

### 3. 직접 API URL 테스트
브라우저에서 직접 접속:
```
https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=o8bhr6higo
```

## 다음 단계

### 즉시 해결 방법
1. 네이버 클라우드 플랫폼에서 현재 도메인 등록
2. API 키 재생성 (필요시)
3. 브라우저 캐시 클리어 후 재테스트

### 장기적 해결책
1. 환경별 API 키 분리 (개발/배포)
2. API 사용량 모니터링 설정
3. 대체 지도 서비스 고려 (카카오맵, Google Maps)

## 현재 구현 상태
✅ 향상된 오류 처리 및 메시지  
✅ 폴백 Mock 지도 시스템  
✅ 전역 오류 상태 관리  
✅ 사용자 친화적 UI  
⏳ 도메인 등록 확인 필요  
⏳ 배포 후 실제 테스트 필요  

## 연락처
문제 지속 시 네이버 클라우드 플랫폼 고객지원 문의